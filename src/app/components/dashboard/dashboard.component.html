
<!DOCTYPE html>

<html dir="rtl" lang="he">

<head>

  <meta charset="UTF-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>דשבורד מערכת קליטת קבצים מכספות</title>

  <!-- styles moved to dashboard.component.css -->

</head>

<body>

  <div class="header">

    <h1>🏠 דשבורד מערכת קליטת קבצים מכספות</h1>

    <div class="welcome-message" id="welcomeMessage">

      🌅 בוקר טוב! יש לך 3 התראות חדשות ו-2 קבצים בהמתנה

    </div>

  </div>

 
  <div class="dashboard">

    <!-- Filters (restored as single grouped bar) -->
    <div class="filters-wrapper">
      <div class="filters" role="region" aria-label="סינון" >

        <div class="filter-column">
          <label for="status">סטטוס</label>
          <select id="status" class="filter-select">
            <option>כל הסטטוסים</option>
            <option>ממתין</option>
            <option>בתהליך</option>
            <option>הסתיים</option>
          </select>
        </div>

        <div class="filter-column">
          <label for="source">מקור קליטה</label>
          <select id="source" class="filter-select">
            <option>כל המקורות</option>
            <option>API</option>
            <option>קובץ</option>
          </select>
        </div>

        <div class="filter-column">
          <label for="system">מערכת</label>
          <select id="system" class="filter-select">
            <option>כל המערכות</option>
            <option>כספות ראשית</option>
            <option>משאבי אנוש</option>
          </select>
        </div>

        <div class="filter-column">
          <label for="dateTo">טווח תאריכים</label>
          <input id="dateTo" class="filter-date" type="date" />
        </div>

        <div class="filter-column">
          <label for="dateFrom">עד תאריך</label>
          <input id="dateFrom" class="filter-date" type="date" />
        </div>

  <div class="filters-spacer"></div>
        <button class="btn-refresh" title="עדכן">🔄 רענן</button>

      </div>
    </div>

    <!-- KPIs עליונים -->

    <div class="hero-kpis">

      <div class="kpi-card primary">

        <span class="kpi-icon">📈</span>

        <div class="kpi-value" id="todayImports">47</div>

        <div class="kpi-label">קליטות היום</div>

        <div class="kpi-change positive">↗️ +12% מאתמול</div>

      </div>

           
      <div class="kpi-card success">

        <span class="kpi-icon">💯</span>

        <div class="kpi-value">96.5%</div>

        <div class="kpi-label">אחוז הצלחה</div>

        <div class="kpi-change positive">↗️ +2.3% השבוע</div>

      </div>

           
      <div class="kpi-card warning">

        <span class="kpi-icon">⚡</span>

        <div class="kpi-value">4.2</div>

        <div class="kpi-label">זמן ממוצע (דקות)</div>

        <div class="kpi-change negative">↘️ -8% מהממוצע</div>

      </div>

           
      <div class="kpi-card info">

        <span class="kpi-icon">📦</span>

        <div class="kpi-value">2.4GB</div>

        <div class="kpi-label">נפח נתונים היום</div>

        <div class="kpi-change positive">↗️ 245,891 רשומות</div>

      </div>

    </div>

 
    <!-- Layout שלושה טורים -->

    <div class="dashboard-layout">

      <!-- עמודה ראשית - ביצועים לפי מערכת -->

      <div class="main-column">

        <div class="card">

          <div class="card-title">

            🏢 ביצועים לפי מערכת

          </div>

          <div class="chart-container">

            <div class="chart-grid">

              <!-- עמודה שמאל - גרף עוגה -->

              <div class="chart-left">

                <svg width="180" height="180" viewBox="0 0 180 180">

                  <!-- גרף עוגה -->

                  <circle cx="90" cy="90" r="70" fill="none" stroke="#667eea" stroke-width="40"

                      stroke-dasharray="175 440" transform="rotate(-90 90 90)" />

                  <circle cx="90" cy="90" r="70" fill="none" stroke="#4caf50" stroke-width="40"

                      stroke-dasharray="110 440" stroke-dashoffset="-175" transform="rotate(-90 90 90)" />

                  <circle cx="90" cy="90" r="70" fill="none" stroke="#ff9800" stroke-width="40"

                      stroke-dasharray="88 440" stroke-dashoffset="-285" transform="rotate(-90 90 90)" />

                  <circle cx="90" cy="90" r="70" fill="none" stroke="#2196f3" stroke-width="40"

                      stroke-dasharray="67 440" stroke-dashoffset="-373" transform="rotate(-90 90 90)" />

                  <!-- טקסט באמצע -->

                  <text x="90" y="85" text-anchor="middle" font-size="24" font-weight="700" fill="#333">127</text>

                  <text x="90" y="105" text-anchor="middle" font-size="12" fill="#666">סה"כ קבצים</text>

                </svg>

              </div>

                           
              <!-- עמודה ימין - מקרא וסטטיסטיקות -->

              <div class="chart-legend">

                <div class="legend-item legend-item--purple">
                  <div class="legend-dot legend-dot--purple"></div>
                  <div class="legend-text">
                    <div class="legend-title">כספות ראשית</div>
                    <div class="legend-subtitle">45 קליטות • 98% הצלחה</div>
                  </div>
                </div>

                               
                <div class="legend-item legend-item--green">
                  <div class="legend-dot legend-dot--green"></div>
                  <div class="legend-text">
                    <div class="legend-title">משאבי אנוש</div>
                    <div class="legend-subtitle">35 קליטות • 95% הצלחה</div>
                  </div>
                </div>

                               
                <div class="legend-item legend-item--orange">
                  <div class="legend-dot legend-dot--orange"></div>
                  <div class="legend-text">
                    <div class="legend-title">דיווחים</div>
                    <div class="legend-subtitle">28 קליטות • 92% הצלחה</div>
                  </div>
                </div>

                               
                <div class="legend-item legend-item--blue">
                  <div class="legend-dot legend-dot--blue"></div>
                  <div class="legend-text">
                    <div class="legend-title">גיבוי</div>
                    <div class="legend-subtitle">19 קליטות • 100% הצלחה</div>
                  </div>
                </div>

              </div>

            </div>

          </div>

        </div>

      </div>

 
      <!-- עמודה צדדית 1 - סטטוס קליטות -->

      <div class="side-column-1">

        <div class="card">

          <div class="card-title">

            📋 סטטוס קליטות

          </div>

          <div class="status-grid">

            <div class="status-item status-waiting">

              <span class="status-number">5</span>

              <div class="status-label">ממתין לקליטה</div>

            </div>

            <div class="status-item status-processing">

              <span class="status-number">3</span>

              <div class="status-label">בתהליך קליטה</div>

            </div>

            <div class="status-item status-success">

              <span class="status-number">47</span>

              <div class="status-label">הסתיים בהצלחה</div>

            </div>

            <div class="status-item status-error">

              <span class="status-number">2</span>

              <div class="status-label">כישלון</div>

            </div>

          </div>

        </div>

      </div>

      <!-- שגיאות מובילות -->
      <div class="card">
        <div class="card-title">⚠️ שגיאות מובילות (TOP 10)</div>
        <div class="error-list">
          <div class="error-item" (click)="showErrorDetails(4)"><div><div class="error-code">שדה אינו מספרי ייחודי</div><div class="error-desc">עמודה: מספר זהות</div></div><span class="error-count">23</span></div>
          <div class="error-item" (click)="showErrorDetails(20)"><div><div class="error-code">שדה חובה אינו מלא</div><div class="error-desc">עמודה: תאריך לידה</div></div><span class="error-count">18</span></div>
          <div class="error-item" (click)="showErrorDetails(10)"><div><div class="error-code">פורמט תאריך לא תקין</div><div class="error-desc">עמודה: תאריך התחלה</div></div><span class="error-count">15</span></div>
        </div>
      </div>

      <!-- תור קבצים ממתינים -->
      <div class="card">
        <div class="card-title">⏳ תור קבצים ממתינים</div>
        <div class="queue-list">
          <div class="queue-item"><div><div class="queue-source">קבצי משכורות - בנק הפועלים</div><div class="queue-eta">ETA: 5 דקות | SLA: 10 דקות</div></div><span class="queue-status on-time">בזמן</span></div>
          <div class="queue-item"><div><div class="queue-source">דוחות יומיים - בנק לאומי</div><div class="queue-eta">ETA: 15 דקות | SLA: 10 דקות</div></div><span class="queue-status delayed">מתעכב</span></div>
        </div>
      </div>

      <!-- הודעה חשובה -->
      <div class="card wide-card">
        <div class="card-title">📢 הודעה חשובה יומית</div>
        <div class="chart-container">אין קבצים חריגים לתאריך זה</div>
      </div>

  <!-- איכות נתונים -->
      <div class="card">
        <div class="card-title">🎯 איכות נתונים (KPIs)</div>
        <div class="kpi-grid"><div class="kpi-item"><div class="kpi-value">94.2%</div><div class="kpi-label">איכות נתונים כללית</div></div><div class="kpi-item"><div class="kpi-value">5.8%</div><div class="kpi-label">שורות פגומות</div></div></div>
      </div>
    
      <!-- התראות אחרונות -->
      <div class="card">
        <div class="card-title">🔔 התראות אחרונות</div>
        <div class="alert-list" [attr.data-count]="recentAlerts.length">
          <div class="alert-item" *ngFor="let alert of recentAlerts">
            <div class="alert-time">{{ alert.time }}</div>
            <div class="alert-content">
              <div class="alert-message">{{ alert.message }}</div>
              <div class="alert-recipient" *ngIf="alert.recipient">נשלח ל: {{ alert.recipient }}</div>
            </div>
          </div>

          <div class="problem-item">

            <div class="problem-name">מלונות חרום - רשימה יומית</div>

            <div class="problem-stats">

              <span class="problem-badge badge-warning">10% שגיאות</span>

              <span>זמן: 8.5 דק׳</span>

            </div>

          </div>

        <!-- מקורות בעייתיים -->
      <div class="card">
        <div class="card-title">🚨 מקורות בעייתיים</div>
        <div class="source-list">
          <div class="source-item" (click)="goToSource(101)"><div><div class="source-name">קבצי משכורות - חברה א'</div><div class="source-desc">זמן קליטה: 15.2 דק'</div></div><span class="failure-rate high-risk">25%</span></div>
        </div>

      </div>

    

    </div>
  </div>

